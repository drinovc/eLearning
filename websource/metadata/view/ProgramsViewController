{
    "type": "Ext.app.ViewController",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "programs",
        "designer|userClassName": "ProgramsViewController"
    },
    "configAlternates": {
        "designer|userAlias": "string",
        "designer|userClassName": "string"
    },
    "designerId": "7505be33-76ed-445e-9f35-0430bf2fbbee",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "load",
                "implHandler": [
                    "",
                    "var me = this,",
                    "    store = me.getStore('StorePrograms');",
                    "",
                    "me.getStore('StoreProgramCategories').setData(App.lookups.ProgramCategories);",
                    "store.load({",
                    "    callback:function(){",
                    "        me.saveState(); // save everything to localstorage",
                    "    }",
                    "});",
                    "",
                    "//me.loadState();"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "load",
            "designerId": "ddd2ccd5-bf92-4c21-9a78-77456a8020f1"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getCurrentState",
                "implHandler": [
                    "var me = this,",
                    "    refs = me.getReferences(),",
                    "    store = me.getStore('StorePrograms'),",
                    "    data = Ext.clone(Ext.pluck(store.getRange(), 'data'));",
                    "",
                    "var programs = {};",
                    "for (var i = 0; i < data.length; i++){",
                    "    var entry = data[i];",
                    "    console.log(\"printing data entry in programs get current state\", entry);",
                    "",
                    "    programs[entry.id] = {programInfo: entry};",
                    "}",
                    "",
                    "",
                    "//return data;",
                    "return programs;"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "getCurrentState",
            "designerId": "afc753bc-be30-4331-b028-ef4d4b315cb1"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "loadState",
                "implHandler": [
                    "var me = this,",
                    "    refs = me.getReferences(),",
                    "    store = me.getStore('StorePrograms'),",
                    "    data = localStorage.getItem('mxp_elearning');",
                    "",
                    "if(data) {",
                    "    data = Ext.decode(data);",
                    "    delete data.slides;",
                    "    delete data.questions;",
                    "    delete data.answers;",
                    "    store.setData(data);",
                    "}"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "loadState",
            "designerId": "1366313d-6d5b-4603-b8b2-a57099afc455"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "saveState",
                "implHandler": [
                    "var me = this,",
                    "    data = me.getCurrentState();",
                    "",
                    "var localStorageData = Ext.decode(localStorage.getItem('mxp_elearning'));",
                    "console.log(\"printing localstorage\", localStorageData);",
                    "",
                    "",
                    "if(!localStorageData){",
                    "    localStorageData = {};",
                    "}",
                    "for (var key in data) {",
                    "    if(!localStorageData[key]){",
                    "        localStorageData[key]={};",
                    "    }",
                    "",
                    "    localStorageData[key].programInfo = data[key].programInfo;",
                    "    console.log(\"printing loalstorage\",localStorageData);",
                    "}",
                    "",
                    "// sets current state to localstorage and calls update with server",
                    "localStorage.setItem('mxp_elearning', Ext.encode(localStorageData));",
                    "",
                    "console.log(\"printing localstorage\", localStorageData);",
                    "",
                    "",
                    "//below is old code that overwrittes completely whole xmp_elearning store",
                    "",
                    "/*var me = this,",
                    "    refs = me.getReferences(),",
                    "    data = me.getCurrentState();",
                    "",
                    "localStorage.setItem('mxp_elearning', Ext.encode(data));*/"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code",
                "designer|params": "typedarray"
            },
            "name": "saveState",
            "designerId": "89f60217-9afa-494b-8f45-b336c4795b47"
        }
    ]
}